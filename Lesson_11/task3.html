<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Задача №2</title>
  </head>

  <body>
    <h1>
      <span>Задача 3</span>. Морський бій. Випадковим чином на двовимірному полі
      розміром 6*6 розташовується 5 кораблів. Користувач стріляє вказуючи
      координати. Гра продовжується поки не потоплено усі кораблі або у
      користувача не закінчаться снаряди.
    </h1>

    <script>
      // Создание игрового поля
      let battleField = [
        [0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0],
      ];

      let countofShips = 5;
      let countOfBullets = 25;

      // Расстановка кораблей на поле
      function getRandomPositionOfShips(countofShips) {
        while (countofShips !== 0) {
          let rowShipPos = Math.floor(Math.random() * 5) + 1;
          let columnShipPos = Math.floor(Math.random() * 5) + 1;

          if (battleField[rowShipPos][columnShipPos] !== 1) {
            battleField[rowShipPos][columnShipPos] = 1;
            countofShips--;
          }
        }

        return battleField;
      }

      // Взаимодействие пользователя с игровым полем
      function battle(countofShips) {
        while (countofShips !== 0) {
          let userColumnBang =
            parseInt(
              prompt(
                "Введите горизонтальное значение клетки для выстрела от 1 до 6"
              )
            ) - 1;

          let userRowBang =
            parseInt(
              prompt(
                "Введите вертикальное значение клетки для выстрела от 1 до 6"
              )
            ) - 1;

          if (battleField[userRowBang][userColumnBang] === 1) {
            countofShips--;
            countOfBullets--;
            alert(
              `"Вы потопили корабль, осталось кораблей: ${countofShips}. Ваш запас снарядов: ${countOfBullets}`
            );
          } else
            alert(
              `Вы не попали! Попробуйте еще раз. Ваш запас снарядов: ${countOfBullets}`
            );

          if (countOfBullets === 0) break;
        }

        return countofShips === 0 ? true : false;
      }

      getRandomPositionOfShips(countofShips);
      let chekwin = battle(countofShips);
      
      // Проверка на победу
      if (chekwin === true)
        document.write("Поздравляем, вы потопили все корабли!");
        else document.write("К сожалению, у Вас закончились снаряды и Вы не смогли потопить все корабли");
    </script>
  </body>
</html>
